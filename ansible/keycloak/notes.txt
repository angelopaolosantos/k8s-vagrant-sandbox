https://stackoverflow.com/questions/73883728/keycloak-admin-console-loading-indefinitely

https://medium.com/@charled.breteche/kind-keycloak-securing-kubernetes-api-server-with-oidc-371c5faef902

https://github.com/int128/kubelogin/issues/29

https://andrewtarry.com/posts/custom-dns-in-kubernetes/

KEYCLOAK_PROXY to edge

update keycloak configmap


Patch the configmap to add ENV KC_PROXY
# Get the configmap deployed for keycloak
$ kubectl get configmap -n <namespace>                        
NAME                DATA   AGE
keycloak-env-vars   15     xx

# Ensure you are doing it in the namespace where keycloak is deployed
kubectl patch configmap keycloak-env-vars -n <namespace> --type merge --patch '{"data":{"KC_PROXY":"edge"}}'

# Get the pod using configmap and restart the same
$ kubectl get pods -n <namespace>
NAME                    READY   STATUS    RESTARTS   AGE
keycloak-0              1/1     Running   0          xx
keycloak-postgresql-0   1/1     Running   0          xx

$ kubectl delete pod keycloak-0 -n <namespace>



Install krew
kubectl krew install oidc-login

kubectl oidc-login setup \
--oidc-issuer-url=https://keycloak.localdev.me/realms/master \
--oidc-client-id=kube \
--oidc-client-secret=e0217XKdOK1qZnwoz29XgwpVL6iLvSya \
--insecure-skip-tls-verify


rm -rf ~/.kube/cache
rm -rf ~/.kube/http-cache